<h1>Security Groups & Ports</h1>

<p>
  Updated on: 19 Sep 2025
  
  
  
    - <a href="/geekmonks/authors/srvivek/">Vivek Singh</a>
  
</p>

<hr/>

<h2 id="concept-overview">Concept Overview</h2>

<ul>
  <li>A <strong>Security Group</strong> acts as a virtual firewall for your Amazon EC2 instances to control inbound and outbound traffic.</li>
  <li>From an architect’s standpoint, it is the initial and most crucial layer of network security for instances, functioning as a gatekeeper to define what traffic is permitted to reach or leave them.</li>
  <li>It’s important to remember that it <strong>operates at the instance level</strong>, not the subnet level.</li>
</ul>

<hr />

<h2 id="detailed-explanation">Detailed Explanation</h2>

<ul>
  <li>Security Groups are a core component of the AWS security model.</li>
  <li>They are <strong>stateful</strong>, which is a key characteristic. This means that if you allow inbound traffic on a specific port, the return outbound traffic is automatically allowed, regardless of any outbound rules.</li>
  <li>Conversely, if you allow outbound traffic, the corresponding inbound traffic is also automatically allowed.</li>
</ul>

<h3 id="key-principles-to-remember">Key principles to remember:</h3>

<ul>
  <li><strong>Default Deny:</strong>
    <ul>
      <li>A Security Group implicitly denies all inbound traffic.</li>
      <li>You must explicitly create rules to allow any traffic in.</li>
    </ul>
  </li>
  <li><strong>Allow-Only Rules:</strong>
    <ul>
      <li>You can only create rules that allow traffic; you cannot create rules to explicitly deny it.</li>
    </ul>
  </li>
  <li><strong>Associated with Instances:</strong>
    <ul>
      <li>A Security Group is associated with one or more EC2 instances.</li>
      <li>An instance can have multiple Security Groups.</li>
    </ul>
  </li>
  <li><strong>Referenced by ID:</strong>
    <ul>
      <li>Rules can reference other Security Groups, which is a powerful feature for managing communication between instances within a VPC.</li>
    </ul>
  </li>
</ul>

<h3 id="ports"><strong>Ports</strong>:</h3>

<ul>
  <li>Ports are a fundamental concept in networking, serving as communication endpoints for applications.</li>
  <li><strong>For example,</strong> web servers commonly use specific ports for different types of traffic.
    <ul>
      <li>When you create a Security Group rule, you specify the <strong>Protocol</strong> (e.g., TCP, UDP, ICMP), a <strong>Port Range</strong>, and a <strong>Source/Destination</strong> (IP address, IP range/CIDR block, or another Security Group).</li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="common-service-ports">Common Service Ports</h3>

<p>Here is a list of common service ports you’ll often encounter when configuring Security Groups, along with their associated services and protocols:</p>

<ul>
  <li><strong>Port 22 (TCP):</strong>
    <ul>
      <li>Used for <strong>SSH (Secure Shell)</strong>.</li>
      <li>This is essential for securely logging in to Linux EC2 instances to perform administrative tasks.</li>
      <li>It’s a best practice to restrict access to this port to a specific IP range (e.g., your office network) rather than the entire internet (<code class="language-plaintext highlighter-rouge">0.0.0.0/0</code>).</li>
    </ul>
  </li>
  <li><strong>Port 3389 (TCP):</strong>
    <ul>
      <li>Used for <strong>RDP (Remote Desktop Protocol)</strong> to windows machines.</li>
      <li>This is the equivalent of SSH for Windows-based EC2 instances, allowing you to connect to the graphical user interface.</li>
      <li>Similar to SSH, restrict this port to a specific, trusted IP address range.</li>
    </ul>
  </li>
  <li><strong>Port 80 (TCP):</strong>
    <ul>
      <li>Used for <strong>HTTP (Hypertext Transfer Protocol)</strong>.</li>
      <li>This port handles <strong>unencrypted</strong> web traffic.</li>
      <li>For public-facing web servers, you’ll need to allow inbound traffic on this port from the entire internet <code class="language-plaintext highlighter-rouge">0.0.0.0/0</code>.</li>
    </ul>
  </li>
  <li><strong>Port 443 (TCP):</strong>
    <ul>
      <li>Used for <strong>HTTPS (Hypertext Transfer Protocol Secure)</strong>.</li>
      <li>This is the standard port for <strong>encrypted</strong> web traffic. It is crucial for any website that handles sensitive information.</li>
      <li>Similar to HTTP, for public-facing web servers, you’ll need to allow inbound traffic on this port from the entire internet <code class="language-plaintext highlighter-rouge">0.0.0.0/0</code>.</li>
    </ul>
  </li>
  <li><strong>Port 8080 (TCP):</strong>
    <ul>
      <li>A common alternative port for web servers or application servers (e.g., Tomcat) when running multiple services on the same instance.</li>
    </ul>
  </li>
  <li><strong>Port 3306 (TCP):</strong>
    <ul>
      <li>Used for <strong>MySQL/Aurora</strong>.</li>
      <li>If you have a MySQL database instance, you’ll need to allow inbound traffic on this port <strong>from your application server’s Security Group</strong>, not the public internet.</li>
    </ul>
  </li>
  <li><strong>Port 5432 (TCP):</strong>
    <ul>
      <li>Used for <strong>PostgreSQL</strong>.</li>
      <li>Similar to MySQL, this port should be accessible only from the application tier.</li>
    </ul>
  </li>
  <li><strong>Port 27017 (TCP):</strong>
    <ul>
      <li>Used for <strong>MongoDB</strong>.</li>
    </ul>
  </li>
  <li><strong>Port 53 (TCP/UDP):</strong>
    <ul>
      <li>Used for <strong>DNS (Domain Name System)</strong>. Essential for name resolution.</li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="advantages--drawbacks">Advantages &amp; Drawbacks</h3>

<p><strong>Advantages:</strong></p>

<ul>
  <li><strong>Simple and effective:</strong>
    <ul>
      <li>Provides a strong and easy-to-manage first line of defense.</li>
    </ul>
  </li>
  <li><strong>Stateful:</strong>
    <ul>
      <li>Simplifies rule management by automatically handling return traffic.</li>
    </ul>
  </li>
  <li><strong>Granular Control:</strong>
    <ul>
      <li>Offers fine-grained control at the instance level.</li>
    </ul>
  </li>
  <li><strong>Referenceable:</strong>
    <ul>
      <li>You can reference other Security Groups, which is great for managing a large number of instances and ensures that rules don’t need to be updated with every instance IP change.</li>
    </ul>
  </li>
</ul>

<p><strong>Drawbacks:</strong></p>

<ul>
  <li><strong>Only “Allow” Rules:</strong>
    <ul>
      <li>You cannot create rules to explicitly deny specific traffic, like blocking a known malicious IP address.</li>
      <li>For this, you would need a Network ACL.</li>
    </ul>
  </li>
  <li><strong>No IP-Level Denial:</strong>
    <ul>
      <li>Within an allowed CIDR range, you can’t block a single IP.
        <ul>
          <li><strong>CIDR stands for Classless Inter-Domain</strong> Routing.</li>
          <li>In the context of AWS Security Groups, a CIDR range is a way to specify a block of IP addresses that are either allowed or denied access to your EC2 instances.</li>
          <li>It’s a more efficient and flexible way to manage IP addresses compared to the old class-based system (Class A, B, C).</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Stateful Outbound:</strong>
    <ul>
      <li>While stateful ingress is a benefit, it can make it harder to restrict outbound traffic in certain scenarios where you might want to prevent an application from making unauthorized outbound calls.</li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="interview-angle">Interview Angle</h3>

<p><strong>Possible Questions:</strong></p>

<ol>
  <li><strong>“Explain the difference between a Security Group and a Network ACL.”</strong>
    <ul>
      <li><strong>Answer Strategy:</strong> A strong answer will highlight the core differences:
        <ul>
          <li>SGs are <strong>stateful</strong> and operate at the <strong>instance level</strong>, while NACLs (Network ACLs) are <strong>stateless</strong> and operate at the <strong>subnet level</strong>.</li>
          <li>Also, mention that SGs only support “allow” rules, while NACLs support both “allow” and “deny.”</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>“How would you securely configure a three-tier application (web, application, database) using Security Groups?”</strong>
    <ul>
      <li><strong>Answer Strategy:</strong> Describe a solution with three separate Security Groups:
        <ul>
          <li><strong>Web Tier SG:</strong>
            <ul>
              <li>Allows inbound traffic on ports 80 and 443 from <code class="language-plaintext highlighter-rouge">0.0.0.0/0</code> (the entire internet).</li>
            </ul>
          </li>
          <li><strong>Application Tier SG:</strong>
            <ul>
              <li>Allows inbound traffic on a specific port (e.g., 8080) <strong>only from the Web Tier’s</strong> Security Group.</li>
            </ul>
          </li>
          <li><strong>Database Tier SG:</strong>
            <ul>
              <li>Allows inbound traffic on the database port (e.g., 3306) <strong>only from the Application Tier’s</strong> Security Group.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>“What happens if an instance has multiple Security Groups, and they have conflicting rules?”</strong>
    <ul>
      <li><strong>Answer Strategy:</strong> Explain that all Security Group rules are <strong>additive</strong>.
        <ul>
          <li>AWS evaluates all rules from all associated Security Groups, and if any single rule allows the traffic, it will be permitted.</li>
          <li>This means there are no “conflicting” rules in a blocking sense; they are all <strong>effectively “OR’d” together</strong> (even if 1 SG allows it will be allowed).</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="for-aws-certification-exam-perspective">For AWS certification exam perspective</h3>

<ul>
  <li><strong>Distinguish SG vs. NACL:</strong>
    <ul>
      <li>This is a fundamental concept for all associate-level exams.</li>
      <li>Memorize the key differences (SG / Network ACL):
        <ul>
          <li><strong>Stateful/Stateless</strong>,</li>
          <li><strong>Instance/Subnet Level</strong>,</li>
          <li><strong>Allow/Allow+Deny</strong>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Default Behavior:</strong>
    <ul>
      <li>Be aware of the default settings:
        <ul>
          <li>SGs deny inbound and allow all outbound by default.</li>
          <li>The default NACL in a new VPC allows all traffic.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Rule Evaluation:</strong>
    <ul>
      <li>Understand that SGs evaluate all rules for a decision, while NACLs process rules in numbered order, <strong>stopping at the first match</strong>.</li>
      <li>This is a common test question.</li>
    </ul>
  </li>
  <li><strong>Principle of Least Privilege:</strong>
    <ul>
      <li>Exam questions will often present scenarios that test your ability to apply the principle of least privilege.</li>
      <li>For instance, you should know that you don’t expose a database to the entire internet (<code class="language-plaintext highlighter-rouge">0.0.0.0/0</code>).</li>
    </ul>
  </li>
  <li><strong>Common Ports:</strong>
    <ul>
      <li>Be familiar with the common port numbers for services like SSH, HTTP, HTTPS, RDP, and common databases.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<p>A step-by-step video on how to create and manage security groups can be found in this tutorial on <a href="https://www.youtube.com/watch?v=uYDT2SsHImQ">AWS Security Groups Simply Explained</a>.</p>

<hr />


<!-- TODO: add footer -->