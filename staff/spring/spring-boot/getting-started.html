<h1>Spring Boot Tutorial</h1>

<p>
  Updated on: 
  
  
  
    - <a href="/geekmonks/authors/srvivek/">Vivek Singh</a>
  
</p>

<hr/>

<h1 id="springboot-basics-v340">springboot Basics [v3.4.0]</h1>
<h2 id="1-return-response-with-link-to-newly-created-resource">1. Return response with link to newly created resource</h2>
<h3 id="project-ref-a2-sboot-ms-social-media-app">Project ref: <a href="https://github.com/SRVivek1/springboot-microservices-2024/tree/main/a2-sboot-ms-social-media-app">a2-sboot-ms-social-media-app</a></h3>
<ul>
  <li><strong><ins>Maven / External dependency</ins></strong>
    <ul>
      <li>Below required resources are available in Spring web dependency.
 	<code class="language-plaintext highlighter-rouge">xml
  	&lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
  &lt;/dependency&gt;
 </code></li>
    </ul>
  </li>
  <li><strong><ins>Code changes</ins></strong>
    <ul>
      <li>imports
        <ul>
          <li><em><code class="language-plaintext highlighter-rouge">import org.springframework.web.servlet.support.ServletUriComponentsBuilder</code></em></li>
        </ul>
      </li>
      <li>Build URL to new Resource using current request.
        <ul>
          <li><em><code class="language-plaintext highlighter-rouge">ServletUriComponentsBuilder.fromCurrentRequest().path("{id}").buildAndExpand(savedUser.getId()).toUri();</code></em></li>
        </ul>
      </li>
      <li>Wrap new URL and response object in <em><code class="language-plaintext highlighter-rouge">ResponseEntity</code></em> and return the <em><code class="language-plaintext highlighter-rouge">ResponseEntity</code></em> object.
        <ul>
          <li><em><code class="language-plaintext highlighter-rouge">return ResponseEntity.created(location).body(savedUser);</code></em></li>
        </ul>
      </li>
      <li>Controller method
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">createUser</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>

          <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"User to save : {}"</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
          <span class="nc">User</span> <span class="n">savedUser</span> <span class="o">=</span> <span class="n">userDaoService</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
	
          <span class="no">URI</span> <span class="n">location</span> <span class="o">=</span> <span class="nc">ServletUriComponentsBuilder</span><span class="o">.</span><span class="na">fromCurrentRequest</span><span class="o">().</span><span class="na">path</span><span class="o">(</span><span class="s">"{id}"</span><span class="o">)</span>
  			<span class="o">.</span><span class="na">buildAndExpand</span><span class="o">(</span><span class="n">savedUser</span><span class="o">.</span><span class="na">getId</span><span class="o">()).</span><span class="na">toUri</span><span class="o">();</span>
	    
          <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">created</span><span class="o">(</span><span class="n">location</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">savedUser</span><span class="o">);</span>
      <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>



<!-- TODO: add footer -->