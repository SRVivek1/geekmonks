<h1>HATEOAS</h1>

<p>
  Updated on: 
  
  
  
    - <a href="/geekmonks/authors/srvivek/">Vivek Singh</a>
  
</p>

<hr/>

<h3 id="project-ref-a8-sboot-ms-hateoas">Project ref: <a href="https://github.com/SRVivek1/springboot-microservices-2024/tree/main/a8-sboot-ms-hateoas">a8-sboot-ms-hateoas</a></h3>
<ul>
  <li><strong><ins>Maven / External dependency</ins></strong>
    <ul>
      <li>Add spring validation dependency.
 	<code class="language-plaintext highlighter-rouge">xml
	&lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;
    &lt;/dependency&gt;
</code></li>
    </ul>
  </li>
  <li><strong><ins>Code changes</ins></strong>
    <ul>
      <li>imports
        <ul>
          <li><code class="language-plaintext highlighter-rouge">import org.springframework.hateoas.EntityModel;</code></li>
          <li><code class="language-plaintext highlighter-rouge">import org.springframework.hateoas.server.mvc.WebMvcLinkBuilder;</code></li>
        </ul>
      </li>
      <li>Add validation in the properties of the bean.
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cm">/**
     * Retrieve the users.
     * @return
     */</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">"/users/{id}"</span><span class="o">,</span> <span class="n">produces</span> <span class="o">=</span> <span class="o">{</span><span class="s">"application/json"</span><span class="o">,</span> <span class="s">"application/xml"</span><span class="o">})</span>
    <span class="kd">public</span> <span class="nc">EntityModel</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">retrieveUser</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userDaoService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
	
        <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">UserNotFoundException</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"No user exists with id : %s"</span><span class="o">,</span> <span class="n">id</span><span class="o">));</span>
        <span class="o">}</span>
	
        <span class="c1">// Hateoas: Create link to method</span>
        <span class="kt">var</span> <span class="n">link</span> <span class="o">=</span> <span class="nc">WebMvcLinkBuilder</span><span class="o">.</span><span class="na">linkTo</span><span class="o">(</span><span class="nc">WebMvcLinkBuilder</span><span class="o">.</span><span class="na">methodOn</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">()).</span><span class="na">retrieveAllUsers</span><span class="o">());</span>
	
        <span class="c1">// EntityModel object supports Model and allows to add links</span>
        <span class="kd">final</span> <span class="nc">EntityModel</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">entityModel</span> <span class="o">=</span> <span class="nc">EntityModel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
			
        <span class="c1">//Hateoas: Add link to Model response object.</span>
        <span class="n">entityModel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">link</span><span class="o">.</span><span class="na">withRel</span><span class="o">(</span><span class="s">"all-users"</span><span class="o">));</span>
			
        <span class="k">return</span> <span class="n">entityModel</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong><ins>Notes:</ins></strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Spring HATEOAS</code> provides some APIs to ease creating REST representations that follow the HATEOAS principle when working with Spring and especially Spring MVC.</li>
      <li>The <code class="language-plaintext highlighter-rouge">core problem it tries to address</code> is link creation and representation assembly.</li>
    </ul>
  </li>
  <li><strong><ins>References:</ins></strong>
    <ul>
      <li>
        <h2 id="httpsspringioprojectsspring-hateoas"><code class="language-plaintext highlighter-rouge">https://spring.io/projects/spring-hateoas</code></h2>
      </li>
    </ul>
  </li>
</ul>


<!-- TODO: add footer -->