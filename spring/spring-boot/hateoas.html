<h1>ğŸ’¡ HATEOAS in Spring Boot</h1>

<p>
  Updated on: 13 Nov 2024
  
  
  
    - <a href="/geekmonks/authors/srvivek/">Vivek Singh</a>
  
</p>

<hr/>

<blockquote>
  <p><strong>Note:</strong>
As a seasoned software engineer, we should leverage <strong>HATEOAS (Hypermedia as the Engine of Application State)</strong> extensively to build truly <strong>RESTful APIs</strong> that are self-discoverable and decoupled. This is a critical principle for robust, scalable microservices.</p>
</blockquote>

<hr />

<h2 id="-table-of-contents">ğŸ“š Table of Contents</h2>

<ul>
  <li><a href="#-table-of-contents">ğŸ“š Table of Contents</a></li>
  <li><a href="#-introduction">ğŸ¤” Introduction</a></li>
  <li><a href="#-purpose-and-use-case">ğŸ¯ Purpose and Use Case</a></li>
  <li><a href="#-benefits-and--drawbacks">ğŸ“ˆ Benefits and ğŸš§ Drawbacks</a></li>
  <li><a href="#ï¸-maven-dependency">ğŸ› ï¸ Maven Dependency</a></li>
  <li><a href="#-core-implementation-in-spring-hateoas">ğŸ’» Core Implementation in Spring HATEOAS</a>
    <ul>
      <li><a href="#project-poc">Project POC</a></li>
    </ul>
  </li>
  <li><a href="#ï¸-hateoas-concept-diagram">ğŸ—ï¸ HATEOAS Concept Diagram</a></li>
  <li><a href="#-engineers-awareness-beyond-the-basics">ğŸ§ Engineerâ€™s Awareness: Beyond the Basics</a></li>
  <li><a href="#-suggested-improvements">ğŸš€ Suggested Improvements</a></li>
</ul>

<hr />

<h2 id="-introduction">ğŸ¤” Introduction</h2>

<p>HATEOAS is a constraint of the <strong>REST (Representational State Transfer)</strong> application architecture. It mandates that a client interacts with a network application entirely through <strong>hypermedia</strong> provided dynamically by the applicationâ€™s responses. Instead of hardcoding URIs, the serverâ€™s responses include links to <em>all</em> possible actions and resources the client can access next. This makes the API <strong>self-descriptive</strong> and allows the server to evolve independently of the client.</p>

<hr />

<h2 id="-purpose-and-use-case">ğŸ¯ Purpose and Use Case</h2>

<p>The primary <strong>purpose</strong> of HATEOAS is to make the API <strong>discoverable</strong> and <strong>decoupled</strong>. By embedding links, the client doesnâ€™t need prior knowledge of the next possible URI structure. A typical <strong>use case</strong> is in a complex workflow, like an e-commerce checkout process: after placing an order, the response includes links for â€œview details,â€ â€œcancel order,â€ or â€œtrack shipment.â€ If the order is already shipped, the â€œcancel orderâ€ link would be dynamically excluded, reflecting the current state. This makes the client-server interaction driven by the application state (Hypermedia as the Engine of Application State).</p>

<hr />

<h2 id="-benefits-and--drawbacks">ğŸ“ˆ Benefits and ğŸš§ Drawbacks</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Aspect</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Benefits</strong></td>
      <td style="text-align: left"><strong>Decoupling</strong> (Client and server evolve independently), <strong>Discoverability</strong> (Client learns possible actions from the response), <strong>Self-Descriptive</strong> (API documentation is partially embedded in the response).</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Drawbacks</strong></td>
      <td style="text-align: left"><strong>Increased Payload</strong> (Links add data to the response), <strong>Client Complexity</strong> (Client must parse links dynamically, not just data), <strong>Initial Learning Curve</strong> (More complex than simple data APIs).</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="ï¸-maven-dependency">ğŸ› ï¸ Maven Dependency</h2>

<p>To enable HATEOAS capabilities in your Spring Boot application, you need the following dependency. The <strong>Spring HATEOAS</strong> project provides the necessary APIs for link creation and representation assembly.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-hateoas<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<hr />

<h2 id="-core-implementation-in-spring-hateoas">ğŸ’» Core Implementation in Spring HATEOAS</h2>

<p>The <strong>Spring HATEOAS</strong> APIs simplify the creation of REST representations. Key classes used are <strong><code class="language-plaintext highlighter-rouge">EntityModel</code></strong> (a container for a domain object and its links) and <strong><code class="language-plaintext highlighter-rouge">WebMvcLinkBuilder</code></strong> (a utility to build links pointing to Spring MVC controller methods).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.hateoas.EntityModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.hateoas.server.mvc.WebMvcLinkBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="c1">// ... other imports for User, UserDaoService, UserNotFoundException</span>

<span class="nd">@GetMapping</span><span class="o">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">"/users/{id}"</span><span class="o">,</span> <span class="n">produces</span> <span class="o">=</span> <span class="o">{</span><span class="s">"application/json"</span><span class="o">,</span> <span class="s">"application/xml"</span><span class="o">})</span>
<span class="kd">public</span> <span class="nc">EntityModel</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">retrieveUser</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userDaoService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">UserNotFoundException</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"No user exists with id : %s"</span><span class="o">,</span> <span class="n">id</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="c1">// Hateoas: Create link to method (using methodOn to reference a controller method)</span>
    <span class="kt">var</span> <span class="n">link</span> <span class="o">=</span> <span class="nc">WebMvcLinkBuilder</span><span class="o">.</span><span class="na">linkTo</span><span class="o">(</span><span class="nc">WebMvcLinkBuilder</span><span class="o">.</span><span class="na">methodOn</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">()).</span><span class="na">retrieveAllUsers</span><span class="o">());</span>

    <span class="c1">// EntityModel object supports Model and allows to add links</span>
    <span class="kd">final</span> <span class="nc">EntityModel</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">entityModel</span> <span class="o">=</span> <span class="nc">EntityModel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    
    <span class="c1">//Hateoas: Add link to Model response object with a specific relation (rel)</span>
    <span class="n">entityModel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">link</span><span class="o">.</span><span class="na">withRel</span><span class="o">(</span><span class="s">"all-users"</span><span class="o">));</span>
    
    <span class="k">return</span> <span class="n">entityModel</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In the code above:</p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">WebMvcLinkBuilder.methodOn(this.getClass()).retrieveAllUsers()</code></strong> intelligently inspects the controller method <code class="language-plaintext highlighter-rouge">retrieveAllUsers()</code> to construct the correct URI.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">linkTo(...)</code></strong> creates the base <code class="language-plaintext highlighter-rouge">Link</code> object.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">EntityModel.of(user)</code></strong> wraps the domain object (<code class="language-plaintext highlighter-rouge">User</code>) to hold the hypermedia links.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">entityModel.add(link.withRel("all-users"))</code></strong> adds the generated link to the response with the relation <strong><code class="language-plaintext highlighter-rouge">all-users</code></strong>, which describes what the link points to.</li>
</ol>

<h3 id="project-poc">Project POC</h3>
<ul>
  <li>Check this app for reference - <a href="https://github.com/SRVivek1/springboot-microservices-2024/tree/main/a8-sboot-ms-hateoas">SpringBoot HATEOAS POC</a></li>
</ul>

<hr />

<h2 id="ï¸-hateoas-concept-diagram">ğŸ—ï¸ HATEOAS Concept Diagram</h2>

<p>This diagram illustrates how the client navigates the application state using links provided in the serverâ€™s response, the core concept of HATEOAS.</p>

<pre><code class="language-mermaid">graph TD
    A[Client sends GET /users/1] --&gt;|Request| B(API Gateway/Controller);
    B --&gt;|Response with User Data| C{User Resource};
    C --&gt;|Embeds Link| D[Link: /users Rel: all-users];
    C --&gt;|Embeds Link| E[Link: /users/1/orders Rel: user-orders];
    D --&gt; F[Client chooses to retrieve all users];
    E --&gt; G[Client chooses to view user's orders];
    F --&gt;|Sends GET /users| B;
    G --&gt;|Sends GET /users/1/orders| B;
    style C fill:#f9f,stroke:#333
    style D fill:#ccf,stroke:#333
    style E fill:#ccf,stroke:#333
    style F fill:#9ff,stroke:#333
    style G fill:#9ff,stroke:#333
    linkStyle 0 stroke:#0f0,stroke-width:2px;
    linkStyle 1 stroke:#0f0,stroke-width:2px;
    linkStyle 2 stroke:#f66,stroke-width:2px;
    linkStyle 3 stroke:#f66,stroke-width:2px;
    linkStyle 4 stroke:#009,stroke-width:2px;
    linkStyle 5 stroke:#009,stroke-width:2px;
</code></pre>

<hr />

<h2 id="-engineers-awareness-beyond-the-basics">ğŸ§ Engineerâ€™s Awareness: Beyond the Basics</h2>

<p>An experienced engineer must be aware of the following advanced aspects of HATEOAS:</p>

<ol>
  <li><strong>Media Types:</strong> HATEOAS requires the use of <strong>Hypermedia-Enabled Media Types</strong> like <strong>HAL (Hypertext Application Language)</strong>, which defines a standard JSON/XML format for embedding links (<code class="language-plaintext highlighter-rouge">_links</code>) and embedded resources (<code class="language-plaintext highlighter-rouge">_embedded</code>). Spring HATEOAS supports HAL out-of-the-box.</li>
  <li><strong>Conditional Linking:</strong> Links should be generated <strong>conditionally</strong> based on the current resource state and the authenticated userâ€™s <strong>permissions</strong>. For example, an â€œEditâ€ link should only be added if the user has the <code class="language-plaintext highlighter-rouge">ROLE_ADMIN</code> and the resource is in an editable state. This ensures a secure and state-driven experience.</li>
  <li><strong>Link Relations (Rels):</strong> Use <strong>standardized</strong> and <strong>meaningful</strong> link relation names (e.g., <code class="language-plaintext highlighter-rouge">self</code>, <code class="language-plaintext highlighter-rouge">next</code>, <code class="language-plaintext highlighter-rouge">prev</code>, <code class="language-plaintext highlighter-rouge">first</code>, <code class="language-plaintext highlighter-rouge">last</code>, or custom domain-specific ones) instead of arbitrary strings. This improves machine readability and client consistency.</li>
  <li><strong>Integration with Paging:</strong> For collection resources, HATEOAS integrates seamlessly with pagination, where links for <code class="language-plaintext highlighter-rouge">next</code>, <code class="language-plaintext highlighter-rouge">prev</code>, <code class="language-plaintext highlighter-rouge">first</code>, and <code class="language-plaintext highlighter-rouge">last</code> pages are automatically included in the response.</li>
</ol>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Concept</th>
      <th style="text-align: left">Key Detail</th>
      <th style="text-align: left">Implementation Focus</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Media Types</strong></td>
      <td style="text-align: left">Utilizes <strong>Hypermedia-Enabled Media Types</strong> like <strong>HAL (Hypertext Application Language)</strong> to structure responses.</td>
      <td style="text-align: left"><strong>HAL</strong> defines standard fields: <code class="language-plaintext highlighter-rouge">_links</code> (for embedded links) and <code class="language-plaintext highlighter-rouge">_embedded</code> (for nested resources), ensuring <strong>client-server decoupling</strong>. <code class="language-plaintext highlighter-rouge">Spring HATEOAS natively supports HAL.</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Conditional Linking</strong></td>
      <td style="text-align: left">Links should be generated <strong>conditionally</strong> based on the <strong>resourceâ€™s current state</strong> and the authenticated userâ€™s <strong>permissions</strong>.</td>
      <td style="text-align: left">Ensures a <strong>secure</strong> and <strong>state-driven</strong> experience. An â€œApproveâ€ link, for instance, is only visible to users with <code class="language-plaintext highlighter-rouge">ROLE_MANAGER</code> and if the order status is <code class="language-plaintext highlighter-rouge">PENDING</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Link Relations (Rels)</strong></td>
      <td style="text-align: left">Employs <strong>standardized</strong> and <strong>meaningful</strong> link relation names (e.g., <code class="language-plaintext highlighter-rouge">self</code>, <code class="language-plaintext highlighter-rouge">next</code>, <code class="language-plaintext highlighter-rouge">prev</code>).</td>
      <td style="text-align: left">Promotes <strong>machine readability</strong> and <strong>client consistency</strong>. Custom domain-specific relations can also be defined for unique actions.</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Integration with Paging</strong></td>
      <td style="text-align: left">Seamlessly integrates HATEOAS with <strong>pagination</strong> for collection resources.</td>
      <td style="text-align: left">Links for navigating pages (<code class="language-plaintext highlighter-rouge">next</code>, <code class="language-plaintext highlighter-rouge">prev</code>, <code class="language-plaintext highlighter-rouge">first</code>, <code class="language-plaintext highlighter-rouge">last</code>) are automatically included, allowing clients to traverse large datasets without hardcoding URLs.</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="-suggested-improvements">ğŸš€ Suggested Improvements</h2>

<p>The current implementation is a great start, but here are a few suggestions to make it more robust and industry-standard:</p>

<ol>
  <li><strong>Use HAL:</strong> While <code class="language-plaintext highlighter-rouge">EntityModel</code> is fine, consider returning a <strong><code class="language-plaintext highlighter-rouge">CollectionModel</code></strong> for lists of resources, and structure your response according to the <strong>HAL standard</strong> for better client adoption. Spring HATEOAS makes this easy.</li>
  <li><strong>Automate Link Generation:</strong> For standard CRUD operations, you can use <strong>Spring Data REST</strong>, which automatically applies HATEOAS principles to repositories, significantly reducing boilerplate code.</li>
  <li><strong>Self-Link:</strong> Always include a <strong><code class="language-plaintext highlighter-rouge">self</code></strong> link in the resource representation to explicitly point back to the resource itself. This is a common HATEOAS convention.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div>


<!-- TODO: add footer -->