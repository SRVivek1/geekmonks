<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"><link rel="stylesheet" href="/geekmonks/assets/css/styles.css"><link type="application/atom+xml" rel="alternate" href="https://srvivek1.github.io/geekmonks/feed.xml" title="Geekmonks Blog"/><title>üõ°Ô∏è Client-Driven Filtering | Geekmonks Blog</title><meta name="generator" content="Jekyll v3.10.0"/><meta property="og:title" content="üõ°Ô∏è Client-Driven Filtering"/><meta property="og:locale" content="en_US"/><meta name="description" content="Note: This section discusses a technique for clients to request a subset of fields or related entities from an API response, enhancing performance and flexibility."/><meta property="og:description" content="Note: This section discusses a technique for clients to request a subset of fields or related entities from an API response, enhancing performance and flexibility."/><link rel="canonical" href="https://srvivek1.github.io/geekmonks/spring/spring-boot/client-driven-filtering.html"/><meta property="og:url" content="https://srvivek1.github.io/geekmonks/spring/spring-boot/client-driven-filtering.html"/><meta property="og:site_name" content="Geekmonks Blog"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-11-22T00:00:00+05:30"/><meta name="twitter:card" content="summary"/><meta property="twitter:title" content="üõ°Ô∏è Client-Driven Filtering"/><script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-11-22T00:00:00+05:30","datePublished":"2024-11-22T00:00:00+05:30","description":"Note: This section discusses a technique for clients to request a subset of fields or related entities from an API response, enhancing performance and flexibility.","headline":"üõ°Ô∏è Client-Driven Filtering","mainEntityOfPage":{"@type":"WebPage","@id":"https://srvivek1.github.io/geekmonks/spring/spring-boot/client-driven-filtering.html"},"url":"https://srvivek1.github.io/geekmonks/spring/spring-boot/client-driven-filtering.html"}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-48XEHMVSEC"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date);gtag("config","G-48XEHMVSEC");</script></head><body class="container-fluid p-0 m-0"><header><nav class="navbar navbar-expand-md navbar-light bg-light text-white content-shadow"><div class="container d-flex justify-content-between"><a href="/geekmonks/" class="navbar-brand d-flex"><img class="d-inline-block align-top" src="/geekmonks/assets/icons/laptop.svg" height="40" width="34"/><h1 class="fs-3 px-2 fw-bold">Geekmonks</h1><img class="d-inline-block align-top" src="/geekmonks/assets/icons/tux.svg" height="40" width="34"/></a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavBanner" aria-controls="navbarNavBanner" aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggler-icon"></span></button><div id="navbarNavBanner" class="collapse navbar-collapse"><ul class="navbar-nav ms-auto"><li class="nav-item active"><a href="/geekmonks/" class="nav-link fw-bold active">Home</a></li><li class="nav-item active"><a href="/geekmonks/about" class="nav-link fw-bold active">About</a></li><li class="nav-item active"><a href="https://github.com/SRVivek1/" class="nav-link fw-bold active" target="_blank" rel="noopener noreferrer">Github</a></li><li class="nav-item active"><a href="https://www.linkedin.com/in/srvivek1/" class="nav-link fw-bold active" target="_blank" rel="noopener noreferrer">LinkedIn</a></li></ul></div></div></nav><nav class="navbar navbar-expand-xl navbar-custom p-0"><div class="container-fluid"><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav mx-auto"><li class="nav-item"><a class="nav-link fw-bold text-white" href="/geekmonks/ai-ml/llm-engineering/">AI-ML</a></li><li class="nav-item"><a class="nav-link fw-bold text-white" href="/geekmonks/cloud/aws/">AWS</a></li><li class="nav-item"><a class="nav-link fw-bold text-white" href="/geekmonks/spring/spring-boot/">Spring Boot</a></li></ul></div></div></nav></header><div class="container-fluid"><div class="row min-vh-100"><nav id="course-sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"><div class="position-sticky pt-3"><ul class="nav flex-column course-topics-list"><a class="nav-link course-link active" href="/geekmonks/spring/spring-boot" data-course="spring/spring-boot"> Spring Boot </a><ul class="nav flex-column ms-3 subtopics" id="topics-spring-spring-boot"><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="getting-started.html" data-topic="getting-started.html" data-course-path="/spring/spring-boot"> Controllers - Getting Started </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="rest-api-validation.html" data-topic="rest-api-validation.html" data-course-path="/spring/spring-boot"> API Validation </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="swagger-api-doc.html" data-topic="swagger-api-doc.html" data-course-path="/spring/spring-boot"> Swagger API Documentation </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="content-negotiation.html" data-topic="content-negotiation.html" data-course-path="/spring/spring-boot"> Content Negotiation </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="i18n.html" data-topic="i18n.html" data-course-path="/spring/spring-boot"> Internationalization (i18n) </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="rest-api-versioning.html" data-topic="rest-api-versioning.html" data-course-path="/spring/spring-boot"> Rest API Versioning </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="rest-api-retirement.html" data-topic="rest-api-retirement.html" data-course-path="/spring/spring-boot"> API Retirement Strategy </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="hateoas.html" data-topic="hateoas.html" data-course-path="/spring/spring-boot"> HATEOAS </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="static-content-filtering.html" data-topic="static-content-filtering.html" data-course-path="/spring/spring-boot"> Static Content Filtering </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="dynamic-content-filtering.html" data-topic="dynamic-content-filtering.html" data-course-path="/spring/spring-boot"> Dynamic Content Filtering </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small active" href="client-driven-filtering.html" data-topic="client-driven-filtering.html" data-course-path="/spring/spring-boot"> Client-Driven Filtering </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="exception-error-handling.html" data-topic="exception-error-handling.html" data-course-path="/spring/spring-boot"> Controller Error Handling </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="hal-explorer.html" data-topic="hal-explorer.html" data-course-path="/spring/spring-boot"> HAL Explorer </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="jpa-with-h2-db.html" data-topic="jpa-with-h2-db.html" data-course-path="/spring/spring-boot"> JPA with H2 DB </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="jpa-with-mysql-db.html" data-topic="jpa-with-mysql-db.html" data-course-path="/spring/spring-boot"> JPA with MySQL DB </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="jpa-jdbc-template.html" data-topic="jpa-jdbc-template.html" data-course-path="/spring/spring-boot"> JPA & JDBC Teamplate </a></li><li class="nav-item" style="text-align: left"><a class="nav-link topic-link small " href="spring-security-basics.html" data-topic="spring-security-basics.html" data-course-path="/spring/spring-boot"> Spring Security </a></li></ul></ul></div></nav><main class="col-md-9 ms-sm-auto col-lg-10 px-md-4"><button id="sidebarToggle" class="btn btn-sm btn-outline-secondary d-md-none mb-2" aria-label="Toggle topics" aria-controls="course-sidebar"> ‚ò∞ Topics </button><div id="topic-content"><div id="pageTitle"><h1>üõ°Ô∏è Client-Driven Filtering</h1><p> Updated on: 22 Nov 2024 - <a href="/geekmonks/authors/srvivek/">Vivek Singh</a></p><hr class="stylish-hr"/></div><blockquote><p><strong>Note:</strong> This section discusses a technique for clients to request a <em>subset</em> of fields or related entities from an API response, enhancing performance and flexibility.</p></blockquote><h2 id="-table-of-contents">üìö Table of Contents</h2><ul><li><a href="#-table-of-contents">üìö Table of Contents</a></li><li><a href="#-introduction-to-client-driven-filtering">üåü Introduction to Client-Driven Filtering</a></li><li><a href="#-purpose-and-benefits">üéØ Purpose and Benefits</a></li><li><a href="#Ô∏è-implementation-aspects">‚öôÔ∏è Implementation Aspects</a><ul><li><a href="#field-filtering-partial-response">Field Filtering (Partial Response)</a><ul><li><a href="#code--config-spring-bootjackson">Code \&amp; Config (Spring Boot/Jackson)</a></li></ul></li><li><a href="#relationship-filtering-dynamic-eager-loading">Relationship Filtering (Dynamic Eager Loading)</a><ul><li><a href="#implementation-strategy-jpahibernate">Implementation Strategy (JPA/Hibernate)</a></li></ul></li></ul></li><li><a href="#-use-case-example">üí° Use Case Example</a></li><li><a href="#Ô∏è-suggested-improvement-for-api-design">üõ†Ô∏è Suggested Improvement for API Design</a><ul><li><a href="#simplified-architecture-diagram">Simplified Architecture Diagram</a></li></ul></li></ul><hr/><h2 id="-introduction-to-client-driven-filtering">üåü Introduction to Client-Driven Filtering</h2><p><strong>Client-Driven Filtering</strong> is an API design pattern where the <strong>client dictates</strong> what data (fields or related resources) they want to receive in the API response, typically via <strong>query parameters</strong>. Instead of the server always returning a full, potentially heavy, representation of a resource, the client asks for a <strong>partial response</strong>. This is crucial in microservices, especially when a single endpoint serves multiple clients with varying data needs, avoiding the classic <strong>Over-fetching</strong> problem.</p><hr/><h2 id="-purpose-and-benefits">üéØ Purpose and Benefits</h2><p>The primary <strong>purpose</strong> is to improve <strong>network efficiency</strong> and <strong>application performance</strong> by minimizing the payload size.</p><table><thead><tr><th style="text-align: left">üéØ Aspect</th><th style="text-align: left">Short Description</th><th style="text-align: left">Detailed Benefit</th></tr></thead><tbody><tr><td style="text-align: left"><strong>Primary Purpose</strong></td><td style="text-align: left">Improve <strong>Network Efficiency</strong> and <strong>Application Performance</strong></td><td style="text-align: left">Achieved by minimizing the overall data payload size transferred between client and server.</td></tr><tr><td style="text-align: left"><strong>Bandwidth Reduction</strong></td><td style="text-align: left">Decrease data transfer volume</td><td style="text-align: left">Especially beneficial for <strong>mobile clients</strong> or connections with <strong>high latency</strong> and limited bandwidth.</td></tr><tr><td style="text-align: left"><strong>Faster Response Time</strong></td><td style="text-align: left">Quicker processing on both ends</td><td style="text-align: left">Smaller payloads reduce the time required for <strong>serialization/deserialization</strong> processes on the server and client.</td></tr><tr><td style="text-align: left"><strong>Reduced Server Load</strong></td><td style="text-align: left">Lower resource utilization</td><td style="text-align: left">Less data to process in the application layer and potentially less strain on the database if filtering influences the data retrieval query.</td></tr><tr><td style="text-align: left"><strong>API Flexibility</strong></td><td style="text-align: left">Single, robust endpoint for diverse clients</td><td style="text-align: left">Allows a single endpoint to efficiently serve various client needs (e.g., list views requiring minimal fields, detail views requiring all fields).</td></tr></tbody></table><hr/><h2 id="Ô∏è-implementation-aspects">‚öôÔ∏è Implementation Aspects</h2><p>Implementing client-driven filtering in a <strong>Spring Boot</strong> application involves two main types: <strong>Field Filtering</strong> (partial response) and <strong>Relationship Filtering</strong> (dynamic eager loading).</p><h3 id="field-filtering-partial-response">Field Filtering (Partial Response)</h3><p>This involves selectively serializing fields in the DTO based on a client-provided list of desired fields (e.g., <code class="language-plaintext highlighter-rouge">?fields=id,name,price</code>).</p><h4 id="code--config-spring-bootjackson">Code &amp; Config (Spring Boot/Jackson)</h4><p>While custom logic is an option, using Spring Boot‚Äôs integration with <strong>Jackson</strong> library allows powerful dynamic filtering. Jackson‚Äôs <code class="language-plaintext highlighter-rouge">@JsonFilter</code> and <code class="language-plaintext highlighter-rouge">FilterProvider</code> can be used, although a simpler approach for partial response is often implemented using a custom <strong><code class="language-plaintext highlighter-rouge">MappingJacksonValue</code></strong>.</p><p><strong>Controller Example (Java):</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">com.fasterxml.jackson.databind.ser.FilterProvider</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.converter.json.MappingJacksonValue</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductController</span> <span class="o">{</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/products/{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">MappingJacksonValue</span> <span class="nf">getProductDetails</span><span class="o">(</span>
            <span class="nd">@PathVariable</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> 
            <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="nc">String</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
        
        <span class="nc">Product</span> <span class="n">product</span> <span class="o">=</span> <span class="n">productService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span> <span class="c1">// Assume this fetches the Product DTO</span>

        <span class="c1">// 1. Create a MappingJacksonValue for dynamic filtering</span>
        <span class="nc">MappingJacksonValue</span> <span class="n">mapping</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MappingJacksonValue</span><span class="o">(</span><span class="n">product</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">fields</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">fields</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="c1">// 2. Define which properties to include</span>
            <span class="nc">String</span><span class="o">[]</span> <span class="n">fieldArray</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">","</span><span class="o">);</span>
            <span class="nc">SimpleBeanPropertyFilter</span> <span class="n">filter</span> <span class="o">=</span> 
                <span class="nc">SimpleBeanPropertyFilter</span><span class="o">.</span><span class="na">filterOutAllExcept</span><span class="o">(</span><span class="n">fieldArray</span><span class="o">);</span>
            
            <span class="c1">// 3. Register the filter with an arbitrary ID ("productFilter")</span>
            <span class="nc">FilterProvider</span> <span class="n">filters</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleFilterProvider</span><span class="o">()</span>
                <span class="o">.</span><span class="na">addFilter</span><span class="o">(</span><span class="s">"productFilter"</span><span class="o">,</span> <span class="n">filter</span><span class="o">);</span>
            
            <span class="c1">// 4. Apply the filter provider</span>
            <span class="n">mapping</span><span class="o">.</span><span class="na">setFilters</span><span class="o">(</span><span class="n">filters</span><span class="o">);</span>
        <span class="o">}</span>
        
        <span class="k">return</span> <span class="n">mapping</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p><br/></p><p><strong>DTO Example (Java):</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonFilter</span><span class="o">;</span>

<span class="c1">// The @JsonFilter annotation links the DTO to the filter ID ("productFilter")</span>
<span class="nd">@JsonFilter</span><span class="o">(</span><span class="s">"productFilter"</span><span class="o">)</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductDTO</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">double</span> <span class="n">price</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">description</span><span class="o">;</span>
    <span class="c1">// Getters and Setters...</span>
<span class="o">}</span>
</code></pre></div></div><h3 id="relationship-filtering-dynamic-eager-loading">Relationship Filtering (Dynamic Eager Loading)</h3><p>This allows the client to request related resources to be included (<strong>eagerly loaded</strong>) in the primary resource‚Äôs response (e.g., <code class="language-plaintext highlighter-rouge">?includes=category,reviews</code>). This is often implemented in the <strong>Service/Repository Layer</strong> by dynamically deciding which related entities to fetch from the database.</p><h4 id="implementation-strategy-jpahibernate">Implementation Strategy (JPA/Hibernate)</h4><p>With <strong>JPA (e.g., Hibernate)</strong>, this can be achieved by using <strong>Entity Graphs</strong> or dynamic <strong><code class="language-plaintext highlighter-rouge">JOIN FETCH</code></strong> clauses based on the <code class="language-plaintext highlighter-rouge">includes</code> parameter.</p><p><strong>Service Example (Java/JPA):</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">jakarta.persistence.EntityGraph</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.EntityManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProductService</span><span class="o">(</span><span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">entityManager</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Product</span> <span class="nf">findProductWithIncludes</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">includes</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Basic example: Create a simple EntityGraph dynamically</span>
        <span class="nc">EntityGraph</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createEntityGraph</span><span class="o">(</span><span class="nc">Product</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">includes</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">includes</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"category"</span><span class="o">))</span> <span class="o">{</span>
             <span class="n">graph</span><span class="o">.</span><span class="na">addAttributeNodes</span><span class="o">(</span><span class="s">"category"</span><span class="o">);</span> <span class="c1">// Eagerly load 'category'</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">includes</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">includes</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"reviews"</span><span class="o">))</span> <span class="o">{</span>
            <span class="c1">// Add sub-graphs or other logic for complex relationships</span>
             <span class="n">graph</span><span class="o">.</span><span class="na">addAttributeNodes</span><span class="o">(</span><span class="s">"reviews"</span><span class="o">);</span> 
        <span class="o">}</span>

        <span class="c1">// Fetch the entity using the dynamic EntityGraph</span>
        <span class="k">return</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Product</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="nc">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"jakarta.persistence.fetchgraph"</span><span class="o">,</span> <span class="n">graph</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><blockquote><p><strong>Note:</strong> The above JPA example is simplified. In production, consider using QueryDSL or Specification to build dynamic <code class="language-plaintext highlighter-rouge">JOIN FETCH</code> queries for more complex scenarios.</p></blockquote><hr/><h2 id="-use-case-example">üí° Use Case Example</h2><table><thead><tr><th style="text-align: left">Client Type</th><th style="text-align: left">Request</th><th style="text-align: left">Description</th></tr></thead><tbody><tr><td style="text-align: left"><strong>Mobile List View</strong></td><td style="text-align: left"><code class="language-plaintext highlighter-rouge">/products?fields=id,name,price</code></td><td style="text-align: left">Needs minimal data for a scrolling list of products. <strong>Saves bandwidth</strong> by omitting descriptions, images, etc.</td></tr><tr><td style="text-align: left"><strong>Web Detail Page</strong></td><td style="text-align: left"><code class="language-plaintext highlighter-rouge">/products?fields=*,description&amp;includes=reviews,seller</code></td><td style="text-align: left">Needs all core fields (<code class="language-plaintext highlighter-rouge">*</code>) plus <code class="language-plaintext highlighter-rouge">description</code>, and requires <strong>related entities</strong> like <code class="language-plaintext highlighter-rouge">reviews</code> and <code class="language-plaintext highlighter-rouge">seller</code> details in a single call.</td></tr><tr><td style="text-align: left"><strong>Internal Service</strong></td><td style="text-align: left"><code class="language-plaintext highlighter-rouge">/products?fields=id,internalSku</code></td><td style="text-align: left">An inventory service only needs identifiers for its processing, filtering out public-facing data.</td></tr></tbody></table><hr/><h2 id="Ô∏è-suggested-improvement-for-api-design">üõ†Ô∏è Suggested Improvement for API Design</h2><p>For maximum clarity and adoption, I suggest adopting a standard, well-documented approach like the <strong>GraphQL</strong> data-fetching model or adhering to the <strong>JSON:API</strong> standard for complex relationship inclusion/exclusion.</p><p><strong>Adoption of a Standard:</strong></p><ul><li><strong>GraphQL:</strong> Completely eliminates over-fetching by design, allowing the client to specify the exact shape of the response in the query itself.</li><li><strong>Recommendation:</strong> If performance and flexible data retrieval is a core requirement across many microservices, <strong>consider migrating key read operations to a GraphQL layer</strong> (e.g., a <em>Gateway</em> or <em>BFF - Backend For Frontend</em>) that aggregates data from your underlying Spring Boot microservices.</li></ul><p><br/></p><p><strong>Visualizing the Impact:</strong></p><h3 id="simplified-architecture-diagram">Simplified Architecture Diagram</h3><p>Here‚Äôs how <strong>Client-Driven Filtering</strong> fits into a typical request flow:</p><pre><code class="language-mermaid">sequenceDiagram
    participant C as Client
    participant SB as Spring Boot API
    participant DB as Database (JPA)

    C-&gt;&gt;SB: GET /products/1?fields=name,price&amp;includes=category
    activate SB
    SB--&gt;&gt;DB: Dynamic Query (e.g., SELECT name, price, category details)
    activate DB
    DB--&gt;&gt;SB: Full Entity/DTO with Eager Loaded Category
    deactivate DB
    SB-&gt;&gt;SB: Serialization (Jackson applies 'fields' filter)
    SB--&gt;&gt;C: Response (JSON with only name, price, and category)
    deactivate SB
</code></pre><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div></div></main></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script><script src="/geekmonks/assets/js/mermaid-diagram-render.js"></script><script src="/geekmonks/assets/js/submenu-togle.js"></script></body></html>